"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[735],{9735:(v,p,i)=>{i.r(p),i.d(p,{EditAccountComponent:()=>l});var s=i(433),e=i(1571),d=i(8657),h=i(529),m=i(2340);class a{constructor(n){this.http=n,this.headers=new h.WM({"Content-Type":"application/json"}),this.prefixUrl=m.N.apiURL,this.baseUrlAccount=this.prefixUrl+"api/account/",this.baseUrlPerson=this.prefixUrl+"api/person/"}getPerson(n){return this.http.get(this.baseUrlPerson+n)}updatePerson(n,t){return this.http.put(this.baseUrlPerson+n,t)}}a.\u0275fac=function(n){return new(n||a)(e.LFG(h.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"});var f=i(8368);class g{constructor(n,t){this.src=n,this.file=t}}class l{constructor(n,t,o,r){this.router=n,this.route=t,this.personService=o,this.authService=r,this.personInfo={id:"",avatar:"",fullname:"",email:""}}processFile(n){const t=n.files[0],o=new FileReader;o.addEventListener("load",r=>{this.selectedFile=new g(r.target.result,t),this.personInfo.avatar=this.selectedFile.src}),o.readAsDataURL(t)}ngOnInit(){this.idToken=this.authService.getTokenId(),this.roleToken=this.authService.getTokenRole(),this.route.paramMap.subscribe({next:n=>{const t=n.get("id");t&&("admin"==this.roleToken?this.personService.getPerson(t).subscribe({next:o=>{this.personInfo=o}}):this.idToken==t?this.personService.getPerson(this.idToken).subscribe({next:o=>{this.personInfo=o}}):this.router.navigate(["not-found"]))}})}updatePerson(){this.personInfo.id&&this.personService.updatePerson(this.personInfo.id,this.personInfo).subscribe(n=>{this.router.navigate(["account"])})}}l.\u0275fac=function(n){return new(n||l)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(a),e.Y36(f.e))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-edit-account"]],standalone:!0,features:[e.jDz],decls:20,vars:6,consts:[[1,"ngForm"],[1,"lNero",3,"ngSubmit"],["form","ngForm"],[1,""],["target","_blank","id","bottle",1,"",3,"href"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"input-group","mb-3"],["type","file","accept","image/*","name","imageLink",3,"change"],["imageInput",""],["type","text","id","fullname","name","fullname",1,"form-control",3,"ngModel","value","ngModelChange"],["type","text","id","email","name","email","disabled","",1,"form-control",3,"ngModel","value","ngModelChange"],["type","submit",1,"btn","btn-success","btn-sm","float-right"]],template:function(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){return t.updatePerson()}),e.TgZ(3,"div",3)(4,"a",4),e._UZ(5,"img",5),e.qZA()(),e.TgZ(6,"div",6)(7,"input",7,8),e.NdJ("change",function(){e.CHM(o);const u=e.MAs(8);return e.KtG(t.processFile(u))}),e.qZA()(),e.TgZ(9,"div")(10,"a"),e._uU(11,"Full Name: "),e.qZA(),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(u){return t.personInfo.fullname=u}),e.qZA()(),e.TgZ(13,"div")(14,"a"),e._uU(15,"Email: "),e.qZA(),e.TgZ(16,"input",10),e.NdJ("ngModelChange",function(u){return t.personInfo.email=u}),e.qZA()(),e._UZ(17,"br"),e.TgZ(18,"button",11),e._uU(19," Upload "),e.qZA()()()}2&n&&(e.xp6(4),e.s9C("href",t.personInfo.avatar,e.LSH),e.xp6(1),e.s9C("src",t.personInfo.avatar,e.LSH),e.xp6(7),e.Q6J("ngModel",t.personInfo.fullname)("value",t.personInfo.fullname),e.xp6(4),e.Q6J("ngModel",t.personInfo.email)("value",t.personInfo.email))},dependencies:[s.u5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F],styles:[".card-img-top[_ngcontent-%COMP%]{width:200px}.ngForm[_ngcontent-%COMP%]{width:100%}.lNero[_ngcontent-%COMP%]{margin:auto;justify-content:center}"]})}}]);